<div class="container tournament-info-container" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="16px">
    <div *ngIf="tournament.game" fxLayout="column" fxLayoutGap="8px" fxFlex>
        <mat-label>Genel Bilgiler</mat-label>
        <mat-card class="mat-elevation-z4 overflow-card">
            <img class="image" *ngIf="tournament.game" mat-card-image src="{{tournament.game.gameImage}}"
                 alt="{{tournament.game.gameName}}">
            <mat-card-content>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="info"></mat-icon> <p>Turnuva Durumu</p>
                    </div>
                    <app-attend-button [tournament]="tournament" [hideParticipantInfo]="true"></app-attend-button>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="tag"></mat-icon> <p>Oyun</p>
                    </div>
                    <p>{{tournament.game.gameName}}</p>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="flag"></mat-icon> <p>Turnuva Tipi</p>
                    </div>
                    <p>{{tournamentType[tournament.tournamentType]}}</p>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="clock"></mat-icon> <p>Başlangıç Tarihi</p>
                    </div>
                    <p>{{tournament.time}} {{tournament.date}}</p>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="users"></mat-icon> <p>Katılımcı Sayısı</p>
                    </div>
                    <p>{{tournament.currentParticipants}} / {{tournament.participantCount}}</p>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="dollar-sign"></mat-icon> <p>Katılım Ücreti</p>
                    </div>
                    <p>{{tournament.participationFee}} {{tournament.feeCurrency}}</p>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="user"></mat-icon> <p>Turnuva Düzenleyen</p>
                    </div>
                    <p>{{tournament.holder.username}}</p>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
                        <mat-icon svgIcon="map-pin"></mat-icon> <p>Adres</p>
                    </div>
                    <p>{{tournament.holder.address}}</p>
                </div>
                <mat-divider></mat-divider>
                <div *ngIf="googleMap" [innerHTML]="googleMap"></div>
            </mat-card-content>
        </mat-card>
    </div>

    <div *ngIf="tournament.participants" fxLayout="column" fxLayoutGap="16px" fxFlex>
        <div fxLayout="column" fxLayoutGap="8px">
            <mat-label>Maksimum Katılımcı Ödülleri</mat-label>
            <mat-card class="mat-elevation-z4">
                <mat-card-content fxLayout="row" fxFlexAlign="space-around center" fxLayoutGap="8px">
                    <div align="center" fxFlex fxLayout="column" fxFlexAlign="center center" fxLayoutGap="8px"
                         class="first-place-award" matTooltip="Birincilik Ödülü">
                        <div><mat-icon svgIcon="award"></mat-icon></div>
                        <b>{{firstPlaceAward.amount}} ₺ | {{firstPlaceAward.ticket}} bilet</b>
                    </div>
                    <div align="center" fxFlex fxLayout="column" fxFlexAlign="center center" fxLayoutGap="8px"
                         class="second-place-award" matTooltip="İkincilik Ödülü">
                        <div><mat-icon svgIcon="award"></mat-icon></div>
                        <b>{{secondPlaceAward.amount}} ₺ | {{secondPlaceAward.ticket}} bilet</b>
                    </div>
                    <div align="center" fxFlex fxLayout="column" fxFlexAlign="center center" fxLayoutGap="8px"
                         class="third-place-award" matTooltip="Üçüncülük Ödülü">
                        <div><mat-icon svgIcon="award"></mat-icon></div>
                        <b>{{thirdPlaceAward.amount}} ₺ | {{thirdPlaceAward.ticket}} bilet</b>
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
        <div class="overflow-card" fxLayout="column" fxLayoutGap="8px">
            <mat-label>Katılımcılar</mat-label>
            <mat-card class="mat-elevation-z4 participants-card overflow-card">
                <mat-card-content *ngIf="tournament.participants.length">
                    <mat-list>
                        <mat-list-item *ngFor="let participant of tournament.participants">
                            <img mat-list-avatar [src]="participant.picture">
                            <p mat-line> {{participant.username}} </p>
                            <h4 mat-line>{{participant.name}} {{participant.surname}}</h4>
                            <div fxLayout="column">
                                <h5 align="right" *ngIf="participant.tournamentRanking">#{{participant.tournamentRanking}}</h5>
                                <h4 matTooltip="Referans Kodu" *ngIf="participant.referenceCode">{{participant.referenceCode}}</h4>
                            </div>
                            <mat-divider></mat-divider>
                        </mat-list-item>
                    </mat-list>
                </mat-card-content>
            </mat-card>
            <mat-card *ngIf="!tournament.participants.length" class="mat-elevation-z4" align="center">
                Katılımcı Bulunamadı
            </mat-card>
        </div>
    </div>

    <div *ngIf="tournament.fixture" fxLayout="column" fxLayoutGap="8px" fxFlex>
        <mat-label>Fikstür</mat-label>
        <mat-card *ngIf="tournament.fixture.draws && tournament.fixture.draws.length" class="mat-elevation-z4 fixture-card overflow-card">
            <mat-card-content>
                <div *ngFor="let draw of tournament.fixture.draws">
                    <div class="fixture-title" fxLayout="row" fxLayoutAlign="space-between center">
                        <p>{{draw.drawTitle}} turu</p>
                        <p>{{dateParser(draw.matches[0].date, 'date_time')}}</p>
                    </div>
                    <div class="fixture-tour" *ngFor="let match of draw.matches; let end = last">
                        <div class="fixture-match" *ngIf="match.home || match.away" fxLayout="row" fxLayoutAlign="space-between center">
                            <p fxFlex>{{match.home && match.home.username ? match.home.username : '---'}}</p>
                            <button *ngIf="match.home && match.away" mat-button class="match-result"
                                    [disabled]="!match.available" [ngClass]="{'disabled': !match.available}"
                                    (click)="openSetMatchScoreDialog(match.tourId, match.matchId, match.home, match.away)">
                                <p>{{match.home.point !== null && match.away.point !== null ?
                                    match.home.point + ' : ' + match.away.point : 'vs'}}</p>
                            </button>
                            <p fxFlex align="right">{{match.away && match.away.username ? match.away.username : '---'}}</p>
                        </div>
                        <mat-divider *ngIf="match.home && match.away && !end"></mat-divider>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
        <mat-card *ngIf="!tournament.fixture.draws || !tournament.fixture.draws.length" class="mat-elevation-z4" align="center">
            Fikstür Daha Belirlenmedi
        </mat-card>
    </div>

    <div *ngIf="!tournament.game" fxFlex="row" fxLayoutAlign="center">
        <p align="center">Gösterilecek Veri Bulunamadı</p>
    </div>
</div>
